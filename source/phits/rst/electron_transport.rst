##############################################################
電子輸送 ( EGS5 ) のPHITSでの使用について
##############################################################

=========================================================
PHITSには、本来的には電子輸送計算は含まれていなかった．
=========================================================

* あくまで、重イオン輸送コードなので、元来のversionでは、電子・光子の輸送を取り扱う機能はなかった．

  + version 2.xx以前は注意．
  + 陽に別の電子・光子輸送コードとの連携が必要だった．

* いつ頃からか( version3.xx 以降? )、内部に電子・光子輸送コード ( EGS5 ) を含めていて、シームレスに取り扱うことが可能となっている．


|
|

=========================================================
電子輸送 (EGS5) の使用方法について
=========================================================

基本的には、 :redbold:`negs=1` を設定すれば良い．


---------------------------------------------------------
確認事項
---------------------------------------------------------

* 使用しているPHITSのバージョンが、EGS5が使用できるバージョンかどうか．
* negs=1 フラッグを設定しているか．
* emin(12) / emin(13)の設定  

|
  
---------------------------------------------------------
パラメータ negs について
---------------------------------------------------------

* [Parameters] セクションに記載
  
.. csv-table:: **negs パラメータの設定値**
   :header: "negs=", "説明"
   :widths: 10, 30
   :width:  600px

   "-1", "PHITS オリジナルモデルを用いて光子のみ輸送する (Default)"
   "0", "光子・電子・陽電子の輸送を取り扱わない"
   "+1", "EGS5を使用する．"
   
|
   
---------------------------------------------------------
emin(12) / emin(13) の設定について
---------------------------------------------------------

* emin(i) は、各粒子輸送のカットオフを設定するパラメータ．

  + (e.g.) 何eVの陽子まで、挙動を追跡するのか．など．

* 電子=12, 陽電子=13, 光子=14 である．

  + 陽電子のカットオフと電子のカットオフは同じ値になっている必要性あり．

.. csv-table:: **emin パラメータの設定値**
   :header: "emin", "デフォルト値", "説明"
   :widths: 20, 10, 30
   :width:  800px

   "emin(12) (negs=-1/0の場合)", "1.0e9", "デフォルト値は、negs=-1/0 の場合、電子輸送は計算しない"
   "emin(12) (negs=+1の場合)", "0.1", "デフォルトは、100keVまで輸送．negs=1のときは、EGS5側で自動設定．もし、emin(12)=xxxと陽に設定した場合は、その値を電子輸送のカットオフにできる．"
   "emin(13) (negs=-1/0の場合)", "1.0e9", "emin(12)と同じ値になる必要あり．"
   "emin(13) (negs=+1の場合)", "0.1", "emin(12)と同じ値になる必要あり．"


.. note::

   emin(12) < 100 eV と設定しようとしたが、

   "emin(12)=1.0E-4 is too small, and changed to 1.0E-3"

   と表示され、実際上、100 eV まで電子を追いかけることはできなかった．

   
   
=========================================================
電子輸送のエネルギーカット
=========================================================

* 二次電子を叩き出し、二次電子量をカウントするビームモニタを設計しようとした際、電子輸送のエネルギーカットオフで、二次電子放出量が変化した．
